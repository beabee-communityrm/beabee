mixin editablePanel(title, id)
	.panel.panel-default
		.panel-heading
			h3.panel-title
				.pull-right
					a(href='#' + id).js-edit-member: span.glyphicon.glyphicon-edit
				= title
		.panel-body
			form(method='POST' id=id).js-edit-member-form
				+csrf
				block
				p.text-right.hidden.js-edit-member-hidden
					button(name='action' value='save-' + id).btn.btn-primary Save

+editablePanel('About', 'about')
	.member-field
		label(for="description").control-label Description
		input(type='text' name='description' value=member.description readonly)#description.form-control

	.member-field
		label(for='bio').control-label Bio
		textarea(name='bio' readonly)#bio.form-control.member-about= member.bio

	p
		| Tags:
		span.js-edit-member-tags
			each tag in member.tags
				span.label.label-info.member-tag
					input(type='hidden' name='tags[]' value=tag.name)
					= tag.name
					span.glyphicon.glyphicon-remove.hidden.js-edit-member-hidden
	p.hidden.js-edit-member-hidden.form-inline
		select(style='width:30%').form-control.member-add-tag.js-edit-member-add-tag
			option Nurse
			option Health worker
		|
		|
		button(type='button').btn.btn-sm.member-add-tag-btn.js-edit-member-add-tag-btn
			span.glyphicon.glyphicon-plus


+editablePanel('Contact details', 'contact')
	.row
		.col-md-12
			.input-group.member-field
				span.input-group-addon
					span.glyphicon.glyphicon-envelope
				.form-control-static= member.email
	.row
		.col-md-6
			.input-group.member-field
				span.input-group-addon
					span.glyphicon.glyphicon-earphone
				input(type='text' name='telephone' value=member.contact.telephone readonly).form-control
		.col-md-6
			.input-group.member-field
				span.input-group-addon
					img(src='/static/imgs/twitter.png')
				input(type='text' name='twitter' value=member.contact.twitter readonly).form-control

+editablePanel('Notes', 'notes')
	.member-field
		textarea(name='notes' readonly).form-control.member-about= member.notes

if access('superadmin')
	.panel.panel-default
		.panel-heading
			h3.panel-title
				.pull-right: a(href=`/members/${member.uuid}/profile`): span.glyphicon.glyphicon-edit
				| Delivery details
		.panel-body
			dl.dl-horizontal
				dt Opt in?
				dd= member.delivery_optin ? 'Yes' : 'No'
				if member.delivery_optin
					dt Address
					dd
						=  member.delivery_address.line1
						br
						if member.delivery_address.line2
							= member.delivery_address.line2
							br
						= member.delivery_address.city
						br
						= member.delivery_address.postcode
