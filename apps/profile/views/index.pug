extends /src/views/base.pug

block contents
	if access( 'admin' )
		.row
			.col-md-12
				.alert.alert-info Admin account

	.row
		.col-md-3
			- page = 'home'
			include partials/sidebar.pug
		.col-md-9
			.page-header
				h3 Hello #{ user.firstname }

			each notice in notices
				if notice.active
					a(href=notice.url || false).alert.alert-success!= notice.text

			p Welcome to your online Cable membership.

			dl
				dt Joined
				dd #{ moment( user.joined ).format('Do MMMM YYYY') }
				dt Contribution
				dd.
					Â£#{ user.contributionAmount }/#{ user.contributionPeriod }

			if user.isActiveMember
				if !user.hasActiveSubscription
					if user.contributionPeriod !== 'gift'
						.alert.alert-warning You cancelled your contribution
					p
						| Your membership will expire on
						|
						= moment(user.memberPermission.date_expires).format('dddd, MMMM Do YYYY')

					p To stop your membership expiring please update your contribution details.

			else
				.alert.alert-danger Your membership has expired

				if user.hasActiveSubscription
					p.
						This is probably because your last payment failed, please
						contact #[+email('membership@thebristolcable.org')].
				else
					p To restart your membership please update your contribution details.

			if !user.hasActiveSubscription
				p
					a(href='/profile/direct-debit').btn.join-btn Contribution details
