extends /src/views/base.pug

block prepend title
	- title = 'Update contribution'

block contents
	.row
		.col-md-3
			- page = 'direct-debit'
			include /apps/profile/views/partials/sidebar.pug
		.col-md-9.col-lg-7
			+page_header( 'Update contribution' )
			if pending_update.amount
				.alert.alert-info.
					Your new contribution of £#{ pending_update.amount } will start on
					#{ moment( pending_update.date ).format('DD/MM/YYYY') }
			if amount
				p
					| You currently contribute £#{ amount } per
					|
					= period === 'monthly' ? 'month' : 'year'
					| .
			form( method='post', action='/profile/direct-debit/update-subscription').form-horizontal
				+csrf

				.form-group
					label( for='amount' ).col-md-3.control-label New amount
					.input-group.col-md-4
						span.input-group-addon £
						input( type='number', name='amount', id='amount', value=pending_update.amount || amount, required, min=1, step=1 ).form-control

				p
					button.btn.join-btn Update contribution

			p.
				To change your billing cycling please contact
				#[+email('membership@thebristolcable.org')].

			hr

			h3 Cancel membership
			p.
				If you cancel your membership it will terminate at the end of
				your current billing cycle.
			a( href="/profile/direct-debit/cancel-subscription" ).btn.btn-danger.outline Cancel membership
